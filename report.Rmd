---
title: "IMDB Movie Project Report"
author: "Xiaofan Xia"
date: "12/5/2019"
output:
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(knitr)
library(ggplot2)
library(kableExtra)
library(lme4)

df <- read.csv("movie_metadata.csv")
df$genres <- as.character(df$genres)
df <-
  df %>%
  separate(genres, into = c("primarygenre"),sep ="[\\|\\ ]",extra = "drop")
unique(df$primarygenre)

```

# 1. Overview

## 1.1 Introduction

This project focuses on digging into the dataset with the information of more than 5000 movies including IMDB scores, number of movies' Facebook likes and basic information about movies' casts. My main objective of this project is to find out how much the movie’s reputation is influenced by other related variables such as the popularity of the casts, and movie’s budget. The reputation of the movie would be quantified as IMDB rating scores, and the popularity of the movie would be quantified as number of Facebook likes and number of voted users. In this project, I firsly cleaned the dataset and did a Exploratory Data Analysis before digging into the modeling analysis. The major model I would use to conduct the analysis and prediction in this project is multi-level linear regression model. 

## 1.2 Motivation

The initial idea of choosing the IMDB movie topic comes from my personal interest. I am a very big fan of many kinds of movies. During my spare time, I always choose to watch movies to relax. Also, many friends of mine are working on the film industry right now. Therefore, I generate some questions about movies and its rating system, and that is why I choose this dataset and this project. I hope that I could solve my own questions about movies during this project as well as help my friends to learn their own industries from a different perspective with data analysis. 

## 1.3 Dataset: IMDB 5000 Movie Dataset from Kaggle.

The IMDB 5000 Movie Dataset contains 28 variables such as movie names, director names, IMDB scores, and movie Facebook likes, etc. This is an open database from Kaggle.


Source: https://www.kaggle.com/carolzhangdc/imdb-5000-movie-dataset 

## 1.4 Research Questions

a. Is there any relationship between the popularity of casts (Facebook likes) and the income of the movie (gross)?

b. Is there any relationship between the popularity of casts (Facebook likes) and the reputation of the movie(IMDB rating scores)?

c. Is there any difference in the ratio of the budget to the gross regarding to different movie genres?

d. What are the patterns of budget and cast in movies with high reputation?

e. What are the patterns of budget and cast in movies with high income?

f. What’s the relationship between the number of face in the poster and the movie’s reputation?

g. Is there any difference in above questions regarding to different language or country of the movies?

h. How can we predict the IMDB rating score using other information of the movie? 


# 2. Exploratory Data Analysis

## 2.1 Basic Statistics of Major Variables
After cleaning the dataset, I firstly explore the basic statistics of major variables I am interested in. In this part, I am assuming the gross and budget are in the same currency with same unit. There are 66 different countries and 48 different languages in this dataset, which shows diverse background of movies. Here's a table of statistics (values of mean, maximum, minimum and median) for varibales including number of Facebook likes, IMDB rating scores and gross.

```{r message=FALSE, warning=FALSE, echo=FALSE}
# stats of facebook likes
fblike_mean <- mean(df$movie_facebook_likes) #7525.965
fblike_max <- max(df$movie_facebook_likes) #349000
fblike_min <- min(df$movie_facebook_likes) #0
fblike_median <- median(df$movie_facebook_likes) #166

# stats of cast total facebook likes
cfblike_mean <- mean(df$cast_total_facebook_likes) #9699.064
cfblike_max <- max(df$cast_total_facebook_likes) #656730
cfblike_min <- min(df$cast_total_facebook_likes) #3090
cfblike_median <- median(df$cast_total_facebook_likes) #0

# stats of number of voted users
numvote_mean <- mean(df$num_voted_users) # 83668.161
numvote_max <- max(df$num_voted_users) #1689764
numvote_min <- min(df$num_voted_users) #5
numvote_median <- median(df$num_voted_users) #34359

# stats of imbd rating scores
rate_mean <- mean(df$imdb_score) #6.442
rate_max <- max(df$imdb_score) #9.5
rate_min <- min(df$imdb_score) #1.6
rate_median <- median(df$imdb_score) #6.6

# stats of gross
invisible(as.numeric(df$gross))
invisible(as.integer(df$gross))
gross_mean <- mean(df$gross,na.rm = TRUE) #48468407.527
gross_max <- max(df$gross,na.rm = TRUE) #760505847
gross_min <- min(df$gross,na.rm = TRUE) #162
gross_median <- median(df$gross,na.rm = TRUE) #25517500

# stats of budget
invisible(as.numeric(df$budget))
invisible(as.integer(df$budget))
budget_mean <- mean(df$budget,na.rm = TRUE) #39752620.436
budget_max <- max(df$budget,na.rm = TRUE) #12215500000
budget_min <- min(df$budget,na.rm = TRUE) #218
budget_median <- median(df$budget,na.rm = TRUE) #2e+07

# stats of duration time in minutes
invisible(as.numeric(df$duration))
invisible(as.integer(df$duration))
duration_mean <- mean(df$duration,na.rm = TRUE) #107.201
duration_max <- max(df$duration,na.rm = TRUE) #511
duration_min <- min(df$duration,na.rm = TRUE) #7
duration_median <- median(df$duration,na.rm = TRUE) #103

# stats of number of critics review
invisible(as.numeric(df$num_critic_for_reviews))
invisible(as.integer(df$num_critic_for_reviews))
critic_mean <- mean(df$num_critic_for_reviews,na.rm = TRUE) #140.194
critic_max <- max(df$num_critic_for_reviews,na.rm = TRUE) #813
critic_min <- min(df$num_critic_for_reviews,na.rm = TRUE) #1
critic_median <- median(df$num_critic_for_reviews,na.rm = TRUE) #110

# define a table to summarize stats
fb <- c(fblike_mean,fblike_max,fblike_min,fblike_median)
cfb <- c(cfblike_mean,cfblike_max,cfblike_min,cfblike_median)
vote <- c(numvote_mean,numvote_max,numvote_min,numvote_median)
rate <- c(rate_mean,rate_max,rate_min,rate_median)
gross <- c(gross_mean,gross_max,gross_min,gross_median)
budget <- c(budget_mean,budget_max,budget_min,budget_median)
duration <- c(duration_mean,duration_max,duration_min,duration_median)
critic <- c(critic_mean,critic_max,critic_min,critic_median)

stat_df <- data.frame(fb,cfb,vote,rate,gross,budget,duration,critic)
names(stat_df) <- c("Number of Facebook likes","Number of Cast Total Facebook likes","Number of voted users","IMDB rating scores" ,"Gross","Budget","Duration Time in minutes","Number of Critic Reviews")
row.names(stat_df) <- c("Mean","Maxium","Minium","Median")
kable(t(stat_df))
```

## 2.2 Graph Presentation

The first graph shows the relationship between movie gross and movie IMDB rating scores. Generally speaking, with higher IMDB rating scores, movies tend to have higher gross. Around IMDB score 7.5, the range of gross is relatively small, which indicates that movies with IMDB score 7.5 tend to have similar profit. We can see that people would spend money on movies with good reputation and movies with good reputation could gain more and more profit. Keeping a great reputation is kind of significant for a movie to survive in the movie market today. Indeed, more and more filming production teams put great effort in advertising their work to the public than before. 

```{r echo=FALSE, warning=FALSE, message=FALSE}
#plots
ggplot(df)+geom_smooth(aes(imdb_score, gross))+xlab("IMDB Rating Scores")+ylab("Gross")+xlim(0,10)+ggtitle("Relationship between Gross and IMDB Scores")
```

The second graph shows the relationship between IMDB rating scores and number of voted users. It is pretty obvious that movies with higer IMDB scores tend to have more voted users, which indicates that most users have similar tastes in movies and higher-rated movies have more audiences willing to vote for them. 

```{r echo=FALSE, warning=FALSE, message=FALSE}
ggplot(df)+geom_smooth(aes(imdb_score, num_voted_users))+xlab("IMDB Rating Scores")+ylab("Number of Voted Users")+xlim(0,10)+ggtitle("Relationship between Number of Voted Users and IMDB Scores")
```

The third graph gives a visual interpretation of the relationship between number of movie Facebook likes and IMDB rating scores, which also could indicate the relationship between movies' popularity and their reputation. Although some movies with lower IMDB scores recieve relatively more Facebook likes, we can see that movies with higher IMDB scores generally have more Facebook likes. 

```{r echo=FALSE, warning=FALSE, message=FALSE}
ggplot(df)+geom_smooth(aes(imdb_score,movie_facebook_likes))+xlim(0,10)+xlab("IMDB Rating Scores")+ylab("Number of Movie Facebook Likes")+ggtitle("Relationship between Number of Movie Facebook Likes and IMDB Scores")
```

From the fourth graph, we can see that generally movies with higher gross tend to have higher budget in the begining phase of filming production. Furthermore,movies with higher gross tend to have wider range of  budget than movies with lower gross. Generally speaking, better script of movies could earn more budget at the begining phase of filming production and better script have larger chance to gain more gross. These days, movies with low budget could be famous and win many big rewards with novel ideas and cutting-edge shooting techniques, which should explain the wide range of budget in higher gross movies. 

```{r echo=FALSE, warning=FALSE, message=FALSE}
ggplot(na.omit(df))+geom_smooth(aes(gross,budget))+xlab("Gross")+ylab("Budget")+ggtitle("Relationship between Budget and Gross")
```

The fifth graph here interpret the relationship between the movie duration time and the IMDB rating scores visually. We can see that movies with most high scores and most low scores tend to have wider range of duration time, but movies with scores from around 5.0 to 8.0 have relatively stable pattern in duration time. Behind the graph, duration time is not a main factor affecting IMDB rating scores since the duration time of a movie is generally between 90 minutes to 120 minutes. 

```{r echo=FALSE, warning=FALSE, message=FALSE}
ggplot(df)+geom_smooth(aes(imdb_score,duration))+xlab("IMDB Rating Scores")+ylab("Duration Time of Movies (in Minutes)")+ggtitle("Relationship between Duration Time of Movies and IMDB Scores")+xlim(0,10)
```

# 3. Medthod

In this project, I focus on the relationship between the popularity of movies and the reputation of movies. Therefore, I use the multi-level linear regression model to analyze that if there is any relationship between the numbers of movie Facebook likes and the IMDB rating scores. 

The 

# 4. Modeling and Analysis

```{r echo=FALSE, warning=FALSE, message=FALSE}
model <- lmer(imdb_score ~ movie_facebook_likes + (movie_facebook_likes | primarygenre), data=df)
fit <- summary(model)

```

# 5. Conclusion and Discussion

## 5.1 Results

## 5.2 Limitations


# 6. Appendix
